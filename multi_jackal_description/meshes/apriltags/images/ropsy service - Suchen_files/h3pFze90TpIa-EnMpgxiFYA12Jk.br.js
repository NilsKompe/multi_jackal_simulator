var WholePageTemplateBingChat;(function(){function t(){var t,u,r;i||(i=!0,n=_qs(".wpt_bc_container"),n!=null&&typeof CIB!="undefined")&&(u=CIB.insertAt(n),u.setAttribute("serp-slot","lite"),r=SydFSCHelper.getConfigOrDefault((t=_w._sydConvConfig)===null||t===void 0?void 0:t.enableSunoBopCustomGreeting,!1),f(r).then(n=>{if(n&&(SydFSCHelper.processCachedResponseUsingCIB(n),r&&CIB.onResponseRendered))var i=n,u=i.messages[0].suggestedResponses.map(n=>n.text),t=CIB.onResponseRendered(()=>{setTimeout(()=>{var t,i,r,f,e,o,s;let n=(s=(o=(e=(f=(r=(i=(t=_d.querySelector(".b_ans .wpt_bc_container"))===null||t===void 0?void 0:t.querySelector("cib-serp"))===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.querySelector("cib-conversation"))===null||f===void 0?void 0:f.shadowRoot)===null||e===void 0?void 0:e.querySelector("cib-suggestion-bar"))===null||o===void 0?void 0:o.shadowRoot)===null||s===void 0?void 0:s.querySelectorAll("cib-suggestion-item");n&&(n===null||n===void 0?void 0:n.forEach((n,t)=>{n&&sj_be(n,"click",n=>{n.preventDefault(),n.stopPropagation(),window.location.href=`https://copilot.microsoft.com/fd/auth/signin?action=interactive&provider=windows_live_id&return_url=https%3A%2F%2Fcopilot.microsoft.com%2F%3Fq%3D${encodeURIComponent(u[t])}%26enablesuno%3D1%26showconv%3D1%26form%3DSUNOB`})}))},500),t===null||t===void 0?void 0:t.dispose()});setTimeout(o,1e3)}))}function f(n=false){var t,i,r,u,f,s;const o=JSON.parse(_w.BingChatCustomGreetingString);s=SydFSCHelper.getConfigOrDefault((t=_w._sydConvConfig)===null||t===void 0?void 0:t.enableBopCustomGreeting,!0);const l=SydFSCHelper.getConfigOrDefault((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableTelemetryPrivacy,!1);if(n){const n=JSON.parse(_w.BingChatCustomSunoGreetingString);return Promise.resolve(n)}if(!s)return Promise.resolve(o);const a=(u=(r=_G===null||_G===void 0?void 0:_G.Lang)===null||r===void 0?void 0:r.split("-")[0])!==null&&u!==void 0?u:"en",v=(f=_G===null||_G===void 0?void 0:_G.Region)!==null&&f!==void 0?f:"*",h={q:new URLSearchParams(window.location.search).get("q"),lang:a,region:v},c=new URLSearchParams(window.location.search).get("testhooks");return c&&(h.testhooks=c),fetch("/wpt/fetchSuggestion?"+new URLSearchParams(h)).then(n=>n.json()).then(n=>{var t,i;return SydFSCHelper.getConfigOrDefault((t=_w._sydConvConfig)===null||t===void 0?void 0:t.isCompliantSydneyEndpointEnabled,!1)||SydFSCHelper.LogIntEvent("ChipRendered","BOP",{data:(i=n.Suggestions)===null||i===void 0?void 0:i.map(n=>l?"<stripped/>":n)}),{messages:[e(n.Query,n.Suggestions)]}}).catch(()=>o)}function e(n,t){function i(){return[{body:[{text:n,type:"TextBlock",wrap:!0}],type:"AdaptiveCard",version:"1.0"}]}function r(n,t){return{text:n,displayText:t,messageType:"Suggestion",messageId:u()}}return{text:n,author:"bot",adaptiveCards:i(),suggestedResponses:t.map(n=>r(n.Query,n.DisplayText)),messageId:u(),spokenText:n}}function u(){function n(){return((1+Math.random())*65536|0).toString(16).substring(1)}return(n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()).toLowerCase()}function o(){var t,i,r,u,f,e,o,s,h,c,l,a,p,w,v,y;if(Lib.CssClass.remove(n,"b_hide"),_w.BingChatEnableClickToChat&&(p=_qs(".wpt_bc_container cib-serp"),w=(u=(r=(i=(t=_qs(".wpt_bc_container cib-serp"))===null||t===void 0?void 0:t.shadowRoot)===null||i===void 0?void 0:i.querySelector("cib-action-bar"))===null||r===void 0?void 0:r.shadowRoot)===null||u===void 0?void 0:u.querySelector(".root"),sj_be(p,"click",()=>{SydFSCHelper.LogIntEvent("ConversationViewEnter","BOP",{source:"BingChat"}),sj_evt.fire("showSydFSC")}),sj_be(w,"click",n=>{n.target.tagName.toLowerCase()!="svg-icon"&&n.target.querySelector("svg-icon")==null&&n.stopPropagation()},!0)),v=(c=(h=(s=(o=(e=(f=_qs(".wpt_bc_container cib-serp"))===null||f===void 0?void 0:f.shadowRoot)===null||e===void 0?void 0:e.querySelector("cib-action-bar"))===null||o===void 0?void 0:o.shadowRoot)===null||s===void 0?void 0:s.querySelector("cib-text-input"))===null||h===void 0?void 0:h.shadowRoot)===null||c===void 0?void 0:c.querySelector("textarea"),v&&sj_be(v,"keydown",n=>{(n.code=="Enter"||n.code=="NumpadEnter")&&setTimeout(()=>{SydFSCHelper.LogIntEvent("ConversationViewEnter","BOP",{source:"BingChat"}),sj_evt.fire("showSydFSC")},10)}),y=(a=(l=_qs(".wpt_bc_container cib-serp"))===null||l===void 0?void 0:l.shadowRoot)===null||a===void 0?void 0:a.querySelector("cib-conversation"),y!=null){let n=sj_ce("style");n.textContent="#cib-conversation-main { cursor: pointer; }";y.appendChild(n)}sj_evt.fire("wptbcready")}var n=null,i=!1,r=_w.BingChatAlternativeRendering;if(r=="htmlready")t();else if(r=="scroll"){function n(){sj_ue&&sj_ue(_w,"scroll",n);t()}sj_be&&sj_be(_w,"scroll",n)}else sj_evt&&sj_evt.bind("onP1",t)})(WholePageTemplateBingChat||(WholePageTemplateBingChat={}))